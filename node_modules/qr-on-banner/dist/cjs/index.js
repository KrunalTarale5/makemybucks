"use strict";
/** @format */
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateQrOnBanner = void 0;
const qrcode_1 = require("qrcode");
/**
 * Generate QR code and add in your banner
 * @param props GenerateQrOnBannerProps
 * @returns Promise<GenerateQrResponse>
 */
const generateQrOnBanner = (props) => {
    return new Promise((resolve, reject) => {
        (0, qrcode_1.toDataURL)(props.stringToCreateQR, {
            type: 'image/png',
            color: {
                light: '#00000000',
                dark: '#000000',
            },
        }, function (err, url) {
            if (err) {
                reject(err);
            }
            if (url) {
                const canvas = document.createElement('canvas');
                canvas.width = 300;
                canvas.height = 450;
                const ctx = canvas.getContext('2d');
                const img = new Image();
                img.src = props.bannerImg;
                img.setAttribute('crossOrigin', 'anonymous');
                img.onload = () => {
                    ctx.drawImage(img, 0, 0, 300, 450);
                    const img_ = new Image();
                    img_.src = url;
                    img_.setAttribute('crossOrigin', 'anonymous');
                    img_.onload = () => {
                        ctx.drawImage(img_, 70, 125, 150, 150);
                        ctx.font = '10px sans-serif';
                        ctx.fillStyle = '#8A92A6';
                        ctx.translate(80, 260); // Move the origin to the desired position
                        ctx.rotate(-Math.PI / 2); // Rotate the canvas 90 degrees counter-clockwise
                        ctx.fillText(props.bannerText, 0, 0);
                        canvas.toBlob((blob) => {
                            resolve({ qrString: props.stringToCreateQR, blob, bannerText: props.bannerText });
                        });
                    };
                };
            }
        });
    });
};
exports.generateQrOnBanner = generateQrOnBanner;
//# sourceMappingURL=index.js.map
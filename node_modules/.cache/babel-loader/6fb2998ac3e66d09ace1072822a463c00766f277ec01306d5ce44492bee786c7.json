{"ast":null,"code":"import InputField from'@components/InputField';import{AddSalesExecutiveContext,IdentityProofFormFields,useVerifySalesExecutivesAAdharApi,validateIdentityProofFields,validateIdentityProofForm}from'@hooks/admin-add-sales-executive';import{FormHelperText,Grid,Stack,useTheme}from'@mui/material';import{memo,useContext,useState}from'react';import NavigateButtons from'../NavigateButtons';import{validateIsNumber}from'@utils/validator';import{useSnackbar}from'@components/Snackbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const intialFormData=formData=>({aadhar_no:formData.aadhar_no,addhar_front_pic:formData.addhar_front_pic,addhar_back_pic:formData.addhar_back_pic});const intialFormError={aadhar_no:'',addhar_back_pic:'',addhar_front_pic:''};const IdentityProofForm=()=>{var _IdentityProofFormFie,_IdentityProofFormFie2,_IdentityProofFormFie3;const{showSnackbar,hideSnackbar}=useSnackbar();const theme=useTheme();const formContext=useContext(AddSalesExecutiveContext);const[formData,setFormData]=useState(intialFormData(formContext.formData));const[formError,setFormError]=useState(intialFormError);const[aadharNo,setAadharNo]=useState({'1':'','2':'','3':''});const VerifySalesExecutivesAAdharApi=useVerifySalesExecutivesAAdharApi();const onAadharNoChange=(fieldName,value)=>{if(value.length>4)return;if(value===''){var _document$getElementB;(_document$getElementB=document.getElementById(\"aadharNo-\".concat(Number(fieldName)-1)))===null||_document$getElementB===void 0?void 0:_document$getElementB.focus();}if(validateIsNumber(String(value))){const _value={...aadharNo,[fieldName]:value};setAadharNo(_value);onChange('aadhar_no',\"\".concat(_value[1]).concat(_value[2]).concat(_value[3]),'number');if(value.length===4){var _document$getElementB2;(_document$getElementB2=document.getElementById(\"aadharNo-\".concat(Number(fieldName)+1)))===null||_document$getElementB2===void 0?void 0:_document$getElementB2.focus();}}};const onChange=(fieldName,value,fieldType,event)=>{let _formData={};if(fieldType==='number'){const isNumber=validateIsNumber(String(value));if(fieldName==='aadhar_no'&&value.length>12)return;_formData={...formData,[fieldName]:isNumber?value:formData[fieldName]};}else if(fieldType==='upload'){var _event$target;_formData={...formData,[fieldName]:event===null||event===void 0?void 0:(_event$target=event.target)===null||_event$target===void 0?void 0:_event$target.files};}else{_formData={...formData,[fieldName]:value};}setFormData(_formData);setFormError({...formError,[fieldName]:validateIdentityProofFields(fieldName,_formData)});};const handleNextClick=()=>{const validatation=validateIdentityProofForm(formData);if(validatation.hasError){setFormError(validatation.errors);return;}VerifySalesExecutivesAAdharApi.mutateAsync({aadhar_no:formData.aadhar_no}).then(()=>{formContext.setFormData({...formContext.formData,...formData});formContext.setActiveStep(formContext.activeStep+1);}).catch(error=>{var _error$response,_error$response$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message,onCancel:()=>hideSnackbar()});});};const handlePreviousClick=()=>{formContext.setActiveStep(formContext.activeStep-1);};return/*#__PURE__*/_jsxs(Stack,{gap:6,alignItems:'flex-start',children:[/*#__PURE__*/_jsx(Grid,{container:true,spacing:4,children:/*#__PURE__*/_jsxs(Grid,{item:true,container:true,xs:7,rowGap:3,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:6,children:[/*#__PURE__*/_jsxs(Stack,{flexDirection:'row',gap:2,alignItems:'self-end',children:[/*#__PURE__*/_jsx(InputField,{fieldName:'1',value:aadharNo[1],fieldProps:{...IdentityProofFormFields.aadhar_no,color:'secondary',fullWidth:true,id:'aadharNo-1',sx:{width:129,gap:0,'.MuiTypography-subtitle1':{fontFamily:'Poppins',fontSize:\"14px\"}},error:Boolean(formError['aadhar_no'])},fieldType:(_IdentityProofFormFie=IdentityProofFormFields.aadhar_no)===null||_IdentityProofFormFie===void 0?void 0:_IdentityProofFormFie.fieldType,onChange:(f,v)=>onAadharNoChange('1',v)},'1'),/*#__PURE__*/_jsx(InputField,{fieldName:'2',value:aadharNo[2],fieldProps:{...IdentityProofFormFields.aadhar_no,color:'secondary',fullWidth:true,label:' ',required:false,id:'aadharNo-2',sx:{width:129,gap:0,'.MuiTypography-subtitle1':{fontFamily:'Poppins',fontSize:\"14px\"}},error:Boolean(formError['aadhar_no'])},fieldType:(_IdentityProofFormFie2=IdentityProofFormFields.aadhar_no)===null||_IdentityProofFormFie2===void 0?void 0:_IdentityProofFormFie2.fieldType,onChange:(f,v)=>onAadharNoChange('2',v)},'2'),/*#__PURE__*/_jsx(InputField,{fieldName:'3',value:aadharNo[3],fieldProps:{...IdentityProofFormFields.aadhar_no,color:'secondary',fullWidth:true,label:' ',required:false,id:'aadharNo-3',sx:{width:129,gap:0,'.MuiTypography-subtitle1':{fontFamily:'Poppins',fontSize:\"14px\"}},error:Boolean(formError['aadhar_no'])},fieldType:(_IdentityProofFormFie3=IdentityProofFormFields.aadhar_no)===null||_IdentityProofFormFie3===void 0?void 0:_IdentityProofFormFie3.fieldType,onChange:(f,v)=>onAadharNoChange('3',v)},'3')]}),formError['aadhar_no']&&/*#__PURE__*/_jsx(FormHelperText,{sx:{color:theme.palette.error.main,marginX:\"14px\",marginTop:\"4px\"},children:formError['aadhar_no']})]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:4,children:/*#__PURE__*/_jsx(Grid,{item:true,xs:12,display:'inline-grid',gridTemplateColumns:\"1fr 1fr\",rowGap:3,columnGap:2,children:Object.entries(IdentityProofFormFields).map(v=>{const fieldName=v[0];const fieldProps=v[1];return(fieldName==='addhar_front_pic'||fieldName==='addhar_back_pic')&&/*#__PURE__*/_jsx(InputField,{fieldName:fieldName,value:formData[fieldName]?URL.createObjectURL(formData[fieldName][0]):'',fieldProps:{...fieldProps,color:'secondary',fullWidth:true,sx:{gap:0,'.MuiTypography-subtitle1':{fontFamily:'Poppins',fontSize:\"14px\"},'.uploader-container':{height:233,borderStyle:'solid',borderWidth:1,borderRadius:\"4px\"}},error:Boolean(formError[fieldName]),helperText:formError[fieldName]},fieldType:fieldProps.fieldType,onChange:onChange},fieldName);})})})]})}),/*#__PURE__*/_jsx(NavigateButtons,{onNextClick:handleNextClick,onPreviousClick:handlePreviousClick})]});};export default/*#__PURE__*/memo(IdentityProofForm);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
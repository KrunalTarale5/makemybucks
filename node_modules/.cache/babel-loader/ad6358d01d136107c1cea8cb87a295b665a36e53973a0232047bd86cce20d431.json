{"ast":null,"code":"import DetailsTable from'@components/DetailsTable';import InputField from'@components/InputField';import{PoppinsTypography}from'@components/Typography';import Uploader from'@components/Uploader';import{AssignRoleFormFields,UpdateSalesExecutiveContext,UpdateSubAdminApi,validateAssignRoleFields,validateAssignRoleForm}from'@hooks/admin-update-sales-executive';import{Grid,Stack,useTheme}from'@mui/material';import{memo,useContext,useEffect,useState}from'react';import NavigateButtons from'../NavigateButtons';import{useNavigate}from'react-router-dom';import{useGetAssignRolesApi,useGetWorkLocationApi}from'@hooks/admin-add-sales-executive';import{useSnackbar}from'@components/Snackbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const intialFormData=formData=>({assign_role:formData===null||formData===void 0?void 0:formData.assign_role,assign_work_location:formData===null||formData===void 0?void 0:formData.assign_work_location});const intialFormError={assign_role:'',assign_work_location:''};const AssignRoleForm=()=>{var _formContext$formData7,_formContext$formData8,_formContext$formData9,_formContext$formData10,_formContext$formData11,_formContext$formData12,_formContext$formData13,_formContext$formData14,_formContext$formData15,_label,_formContext$formData16,_formContext$formData17,_formContext$formData18,_formContext$formData19,_formContext$formData20,_formContext$formData21,_formContext$formData22,_label2,_formContext$formData23,_formContext$formData24,_formContext$formData25,_formContext$formData26,_formContext$formData27,_formContext$formData28;const theme=useTheme();const navigate=useNavigate();const{showSnackbar,hideSnackbar}=useSnackbar();const formContext=useContext(UpdateSalesExecutiveContext);const GetAssignRolesApi=useGetAssignRolesApi();const GetWorkLocationApi=useGetWorkLocationApi();const[formData,setFormData]=useState(intialFormData(formContext.formData));const[formError,setFormError]=useState(intialFormError);const[isLoading,setIsLoading]=useState(false);useEffect(()=>{var _GetAssignRolesApi$da,_GetWorkLocationApi$d;setFormData({...formContext.formData,assign_role:(_GetAssignRolesApi$da=GetAssignRolesApi.data)===null||_GetAssignRolesApi$da===void 0?void 0:_GetAssignRolesApi$da.data.subAdminRolesData.map(r=>({label:r.roles,value:r.id})).filter(f=>{var _formContext$formData;return f.label===((_formContext$formData=formContext.formData)===null||_formContext$formData===void 0?void 0:_formContext$formData.assign_role);})[0],assign_work_location:(_GetWorkLocationApi$d=GetWorkLocationApi.data)===null||_GetWorkLocationApi$d===void 0?void 0:_GetWorkLocationApi$d.data.location_data.map(r=>({label:r.location_name,value:r.id})).filter(f=>{var _formContext$formData2;return f.label===((_formContext$formData2=formContext.formData)===null||_formContext$formData2===void 0?void 0:_formContext$formData2.assign_work_location);})[0]});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[formContext.formData,GetAssignRolesApi.dataUpdatedAt,GetWorkLocationApi.dataUpdatedAt]);const onChange=(fieldName,value)=>{let _formData={};_formData={...formData,[fieldName]:value};setFormData(_formData);setFormError({...formError,[fieldName]:validateAssignRoleFields(fieldName,_formData)});};const handleUpdateClick=()=>{var _formData$assign_role,_formData$assign_work,_formContext$formData3,_formContext$formData4,_formContext$formData5,_formContext$formData6;const validatation=validateAssignRoleForm(formData);if(validatation.hasError){setFormError(validatation.errors);return;}setIsLoading(true);UpdateSubAdminApi({...formContext.formData,...formData,assign_role:(_formData$assign_role=formData.assign_role)===null||_formData$assign_role===void 0?void 0:_formData$assign_role.label,assign_work_location:(_formData$assign_work=formData.assign_work_location)===null||_formData$assign_work===void 0?void 0:_formData$assign_work.label,local_state:(_formContext$formData3=formContext.formData)===null||_formContext$formData3===void 0?void 0:(_formContext$formData4=_formContext$formData3.local_state)===null||_formContext$formData4===void 0?void 0:_formContext$formData4.label,permanent_state:(_formContext$formData5=formContext.formData)===null||_formContext$formData5===void 0?void 0:(_formContext$formData6=_formContext$formData5.permanent_state)===null||_formContext$formData6===void 0?void 0:_formContext$formData6.label}).then(response=>{var _response$data;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.message,onCancel:()=>hideSnackbar()});navigate('/admin/subadmin');setIsLoading(false);}).catch(error=>{var _error$response,_error$response$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message,onCancel:()=>hideSnackbar()});setIsLoading(false);});};const handlePreviousClick=()=>{formContext.setActiveStep(formContext.activeStep-1);};const getOptions=fieldName=>{var _GetAssignRolesApi$da2,_GetWorkLocationApi$d2;switch(fieldName){case'assign_role':return(_GetAssignRolesApi$da2=GetAssignRolesApi.data)===null||_GetAssignRolesApi$da2===void 0?void 0:_GetAssignRolesApi$da2.data.subAdminRolesData.map(r=>({label:r.roles,value:r.id}));case'assign_work_location':return(_GetWorkLocationApi$d2=GetWorkLocationApi.data)===null||_GetWorkLocationApi$d2===void 0?void 0:_GetWorkLocationApi$d2.data.location_data.map(l=>({label:l.location_name,value:l.id}));default:break;}};return/*#__PURE__*/_jsxs(Stack,{gap:6,alignItems:'flex-start',children:[/*#__PURE__*/_jsxs(Stack,{width:\"100%\",flexDirection:'row',children:[/*#__PURE__*/_jsxs(Stack,{flexBasis:\"55%\",sx:{'& table':{borderCollapse:'separate',borderSpacing:\"0 24px\"},'& td':{minWidth:\"200px\"},'& tr':{verticalAlign:'top'}},children:[/*#__PURE__*/_jsx(DetailsTable,{data:[{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"ID:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:(_formContext$formData7=formContext.formData)===null||_formContext$formData7===void 0?void 0:_formContext$formData7.user_id}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Name:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:\"\".concat((_formContext$formData8=formContext.formData)===null||_formContext$formData8===void 0?void 0:_formContext$formData8.first_name,\" \").concat((_formContext$formData9=formContext.formData)===null||_formContext$formData9===void 0?void 0:_formContext$formData9.last_name)}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Email ID:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:(_formContext$formData10=formContext.formData)===null||_formContext$formData10===void 0?void 0:_formContext$formData10.email}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Phone Number:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:(_formContext$formData11=formContext.formData)===null||_formContext$formData11===void 0?void 0:_formContext$formData11.mobile_no}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Personal Number:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:(_formContext$formData12=formContext.formData)===null||_formContext$formData12===void 0?void 0:_formContext$formData12.personal_no}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Local Address:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:\"\".concat((_formContext$formData13=formContext.formData)===null||_formContext$formData13===void 0?void 0:_formContext$formData13.local_flat_no,\" \").concat((_formContext$formData14=formContext.formData)===null||_formContext$formData14===void 0?void 0:_formContext$formData14.local_street_name,\" \").concat((_formContext$formData15=formContext.formData)===null||_formContext$formData15===void 0?void 0:_formContext$formData15.local_city,\" \").concat((_label=(_formContext$formData16=formContext.formData)===null||_formContext$formData16===void 0?void 0:(_formContext$formData17=_formContext$formData16.local_state)===null||_formContext$formData17===void 0?void 0:_formContext$formData17.label)!==null&&_label!==void 0?_label:(_formContext$formData18=formContext.formData)===null||_formContext$formData18===void 0?void 0:_formContext$formData18.local_state,\" \").concat((_formContext$formData19=formContext.formData)===null||_formContext$formData19===void 0?void 0:_formContext$formData19.local_pin_code,\" \")}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Permanent Address:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:\"\".concat((_formContext$formData20=formContext.formData)===null||_formContext$formData20===void 0?void 0:_formContext$formData20.permanent_flat_no,\" \").concat((_formContext$formData21=formContext.formData)===null||_formContext$formData21===void 0?void 0:_formContext$formData21.permanent_street_name,\" \").concat((_formContext$formData22=formContext.formData)===null||_formContext$formData22===void 0?void 0:_formContext$formData22.permanent_city,\" \").concat((_label2=(_formContext$formData23=formContext.formData)===null||_formContext$formData23===void 0?void 0:(_formContext$formData24=_formContext$formData23.permanent_state)===null||_formContext$formData24===void 0?void 0:_formContext$formData24.label)!==null&&_label2!==void 0?_label2:(_formContext$formData25=formContext.formData)===null||_formContext$formData25===void 0?void 0:_formContext$formData25.permanent_state,\" \").concat((_formContext$formData26=formContext.formData)===null||_formContext$formData26===void 0?void 0:_formContext$formData26.permanent_pin_code)}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Aadhar Number:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:(_formContext$formData27=formContext.formData)===null||_formContext$formData27===void 0?void 0:_formContext$formData27.aadhar_no}),showWhen:true}]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:4,children:/*#__PURE__*/_jsx(Grid,{item:true,xs:10,display:'inline-grid',gridTemplateColumns:\"1fr 1fr\",rowGap:3,columnGap:2,children:Object.entries(AssignRoleFormFields).map(v=>{var _ref;const fieldName=v[0];const fieldProps=v[1];return/*#__PURE__*/_jsx(InputField,{fieldName:fieldName,value:(_ref=formData===null||formData===void 0?void 0:formData[fieldName])!==null&&_ref!==void 0?_ref:'',fieldProps:{...fieldProps,color:'secondary',fullWidth:true,sx:{gap:0,'.MuiTypography-subtitle1':{fontFamily:'Poppins',fontSize:\"14px\"}},error:Boolean(formError[fieldName]),helperText:formError[fieldName],options:getOptions(fieldName)},fieldType:fieldProps.fieldType,onChange:onChange},fieldName);})})})]}),/*#__PURE__*/_jsx(Stack,{flexBasis:\"45%\",children:/*#__PURE__*/_jsx(Grid,{item:true,xs:4,sx:{textAlign:'-webkit-center'},children:/*#__PURE__*/_jsx(Uploader,{fieldName:\"fieldName\",sx:{placeContent:'flex-end',width:266,height:266},file:(_formContext$formData28=formContext.formData)===null||_formContext$formData28===void 0?void 0:_formContext$formData28.profile_pic})})})]}),/*#__PURE__*/_jsx(NavigateButtons,{loading:isLoading,onUpdateClick:handleUpdateClick,onPreviousClick:handlePreviousClick})]});};export default/*#__PURE__*/memo(AssignRoleForm);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import IconFinder from'@components/Icon';import UserAppWrapper from'@components/UserAppWrapper';import{Stack,useTheme}from'@mui/material';import{memo,useState}from'react';import{FiraSansTypography}from'@components/Typography';import{useNavigate,useSearchParams}from'react-router-dom';import CelebrationTriangles from'_assets/icons/celebration-triangles.svg';import{useGetOrderDetailsApi}from'@hooks/user-app-payment';import Uploader from'@components/Uploader';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PaymentError=()=>{const theme=useTheme();const[amount,setAmount]=useState('');const[orderId,setOrderId]=useState('');const[userId,setUserId]=useState('');const[userName,setUserName]=useState('');const[userProfile,setUserProfile]=useState('');const[restoName,setRestoName]=useState('');const[restoImage,setRestoImage]=useState('');const[restoId,setRestoId]=useState('');const[paymentStatus,setPaymentStatus]=useState('');// const req = new XMLHttpRequest();\n// console.log(req.response);\nconst navigate=useNavigate();const[searchParams]=useSearchParams();// const user_id = params?.get('user_id') as string;\n// const restaurant_id = params?.get('restaurant_id') as string;\nconst order_id=searchParams===null||searchParams===void 0?void 0:searchParams.get('order_id');console.log(order_id,order_id);const getOrderDetailsResponse=useGetOrderDetailsApi(order_id);console.log('getOrderDetailsResponse',getOrderDetailsResponse);const fetchPaymentDetails=paymentId=>{const axiosBaseURL=axios.create({baseURL:'https://api.makemybucks.com'});axiosBaseURL.get('/fetch_payment/'+\"\".concat(paymentId,\"/\"),{headers:{Authorization:'Basic cnpwX3Rlc3RfYktiR25xbmV3RDR6Z2Y6SjZyYzZFT3FlYlNqMklwV3VYSmZiWk1i'}}).then(response=>{console.log(response.data);setPaymentStatus(response.data['order_details']['status']==='captured'?'success':'failed');}).catch(error=>{console.log(error);});/*\r\n\t\t\tHeaders:*/ // const axios = require('axios');\n// const config = {\n// \tmethod: 'get',\n// \tmaxBodyLength: Infinity,\n// \turl: 'https://api.razorpay.com/v1/payments/' + `${paymentId}`,\n// \theaders: {\n// \t\tAuthorization: 'Basic cnpwX3Rlc3RfYktiR25xbmV3RDR6Z2Y6SjZyYzZFT3FlYlNqMklwV3VYSmZiWk1i',\n// \t},\n// };\n// axios\n// \t.request(config)\n// \t.then((response: { data: any }) => {\n// \t\tconsole.log(JSON.stringify(response.data));\n// \t\tsetPaymentStatus(response.data['status'] === 'captured' ? 'success' : 'failed');\n// \t})\n// \t.catch((error: any) => {\n// \t\tconsole.log(error);\n// \t});\n};if(getOrderDetailsResponse.data!==undefined&&restoName===''){var _getOrderDetailsRespo,_getOrderDetailsRespo2,_getOrderDetailsRespo3,_getOrderDetailsRespo4,_getOrderDetailsRespo5,_getOrderDetailsRespo6,_getOrderDetailsRespo7,_getOrderDetailsRespo8,_getOrderDetailsRespo9,_getOrderDetailsRespo10,_getOrderDetailsRespo11,_getOrderDetailsRespo12,_getOrderDetailsRespo13,_getOrderDetailsRespo14,_getOrderDetailsRespo15,_getOrderDetailsRespo16,_getOrderDetailsRespo17,_getOrderDetailsRespo18,_getOrderDetailsRespo19,_getOrderDetailsRespo20,_getOrderDetailsRespo21,_getOrderDetailsRespo22,_getOrderDetailsRespo23,_getOrderDetailsRespo24;setOrderId(order_id);setAmount((_getOrderDetailsRespo=(_getOrderDetailsRespo2=getOrderDetailsResponse.data)===null||_getOrderDetailsRespo2===void 0?void 0:(_getOrderDetailsRespo3=_getOrderDetailsRespo2.data)===null||_getOrderDetailsRespo3===void 0?void 0:_getOrderDetailsRespo3.transaction_details.transaction_amount)!==null&&_getOrderDetailsRespo!==void 0?_getOrderDetailsRespo:'');setUserId((_getOrderDetailsRespo4=(_getOrderDetailsRespo5=getOrderDetailsResponse.data)===null||_getOrderDetailsRespo5===void 0?void 0:(_getOrderDetailsRespo6=_getOrderDetailsRespo5.data)===null||_getOrderDetailsRespo6===void 0?void 0:_getOrderDetailsRespo6.user_details.user_id.toString())!==null&&_getOrderDetailsRespo4!==void 0?_getOrderDetailsRespo4:'');setUserName((_getOrderDetailsRespo7=(_getOrderDetailsRespo8=getOrderDetailsResponse.data)===null||_getOrderDetailsRespo8===void 0?void 0:(_getOrderDetailsRespo9=_getOrderDetailsRespo8.data)===null||_getOrderDetailsRespo9===void 0?void 0:_getOrderDetailsRespo9.user_details.user_full_name)!==null&&_getOrderDetailsRespo7!==void 0?_getOrderDetailsRespo7:'');setUserProfile((_getOrderDetailsRespo10=(_getOrderDetailsRespo11=getOrderDetailsResponse.data)===null||_getOrderDetailsRespo11===void 0?void 0:(_getOrderDetailsRespo12=_getOrderDetailsRespo11.data)===null||_getOrderDetailsRespo12===void 0?void 0:_getOrderDetailsRespo12.user_details.user_profile_img)!==null&&_getOrderDetailsRespo10!==void 0?_getOrderDetailsRespo10:'');setRestoId((_getOrderDetailsRespo13=(_getOrderDetailsRespo14=getOrderDetailsResponse.data)===null||_getOrderDetailsRespo14===void 0?void 0:(_getOrderDetailsRespo15=_getOrderDetailsRespo14.data)===null||_getOrderDetailsRespo15===void 0?void 0:_getOrderDetailsRespo15.restaurant_details.restaurant_id)!==null&&_getOrderDetailsRespo13!==void 0?_getOrderDetailsRespo13:'');setRestoName((_getOrderDetailsRespo16=(_getOrderDetailsRespo17=getOrderDetailsResponse.data)===null||_getOrderDetailsRespo17===void 0?void 0:(_getOrderDetailsRespo18=_getOrderDetailsRespo17.data)===null||_getOrderDetailsRespo18===void 0?void 0:_getOrderDetailsRespo18.restaurant_details.restaurant_name)!==null&&_getOrderDetailsRespo16!==void 0?_getOrderDetailsRespo16:'');setRestoImage((_getOrderDetailsRespo19=(_getOrderDetailsRespo20=getOrderDetailsResponse.data)===null||_getOrderDetailsRespo20===void 0?void 0:(_getOrderDetailsRespo21=_getOrderDetailsRespo20.data)===null||_getOrderDetailsRespo21===void 0?void 0:_getOrderDetailsRespo21.restaurant_details.restaurant_profile)!==null&&_getOrderDetailsRespo19!==void 0?_getOrderDetailsRespo19:'');fetchPaymentDetails((_getOrderDetailsRespo22=(_getOrderDetailsRespo23=getOrderDetailsResponse.data)===null||_getOrderDetailsRespo23===void 0?void 0:(_getOrderDetailsRespo24=_getOrderDetailsRespo23.data)===null||_getOrderDetailsRespo24===void 0?void 0:_getOrderDetailsRespo24.transaction_details.payment_id)!==null&&_getOrderDetailsRespo22!==void 0?_getOrderDetailsRespo22:'');}return/*#__PURE__*/_jsx(UserAppWrapper,{children:/*#__PURE__*/_jsx(Stack,{gap:1,flexGrow:1,justifyContent:'space-between',sx:{backgroundSize:'contain',backgroundImage:\"url(\".concat(CelebrationTriangles,\")\"),backgroundRepeat:'no-repeat'},children:/*#__PURE__*/_jsxs(Stack,{gap:1,children:[/*#__PURE__*/_jsx(Stack,{alignSelf:'center',paddingTop:\"30vh\",children:/*#__PURE__*/_jsx(IconFinder,{iconName:\"SuccessLogo\",iconProps:{fill:theme.palette.success.main}})}),/*#__PURE__*/_jsx(FiraSansTypography,{variant:\"h4\",textAlign:'center',fontWeight:600,sx:{color:theme.palette.common.white},children:\"Payment Successful\"}),/*#__PURE__*/_jsx(FiraSansTypography,{variant:\"h6\",textAlign:'center',fontWeight:600,marginBottom:10,sx:{color:theme.palette.common.primaryGreyText},children:\"Hello \".concat(userName,\"! Your payment is all \").concat(paymentStatus==='success'?'done':'failed')}),/*#__PURE__*/_jsxs(Stack,{alignItems:'center',gap:1,sx:{marginTop:'10%'},children:[/*#__PURE__*/_jsx(Uploader,{fieldName:\"restaurant_img\",sx:{placeContent:'flex-end',height:68,marginTop:'10%',width:68,borderRadius:'16px',justifyContent:'center',alignItems:'center'},file:restoImage!==null&&restoImage!==void 0?restoImage:''}),/*#__PURE__*/_jsx(FiraSansTypography,{variant:\"h4\",fontWeight:600,fontSize:24,sx:{color:theme.palette.common.white,marginTop:'2%'},children:restoName})]}),/*#__PURE__*/_jsx(FiraSansTypography,{variant:\"h5\",textAlign:'center',fontWeight:600,sx:{color:theme.palette.common.white,marginTop:'10%'},children:\"Amount: \\u20B9\".concat(amount)}),/*#__PURE__*/_jsx(FiraSansTypography,{variant:\"h5\",textAlign:'center',fontWeight:600,sx:{color:theme.palette.common.white},children:\"Order Id: \".concat(orderId)})]})})});};export default/*#__PURE__*/memo(PaymentError);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
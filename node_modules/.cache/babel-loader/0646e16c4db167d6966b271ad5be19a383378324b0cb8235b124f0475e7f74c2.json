{"ast":null,"code":"import{AdminCards}from'@components/Cards';import IconFinder from'@components/Icon';import Pagination from'@components/Pagination';import Table from'@components/Table';import{Button,FormControl,FormControlLabel,IconButton,Radio,RadioGroup,Stack,TextField,useTheme}from'@mui/material';import{memo,useRef,useState}from'react';import{useNavigate}from'react-router-dom';import SalesExecutivesDetails from'./SalesExcecutiveDetails';import{SALES_EXECUTIVE_FORM_STEPS,useDeleteSalesExecutivesApi,useGetSalesExecutivesApi,useGetSubAdminCountApi}from'@hooks/admin-add-sales-executive';import{useAlertDialog}from'@components/AlertDialog';import{PoppinsTypography}from'@components/Typography';import{useSubAdminStatus}from'@hooks/common';import{useSnackbar}from'@components/Snackbar';import{BannerInformation,useBannerInfo}from'@hooks/admin-banner-info';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Dashboard=()=>{var _searchInputRef$curre,_GetSalesExecutivesAp,_GetSalesExecutivesAp2,_GetSubAdminCountsApi,_GetSubAdminCountsApi2,_GetSubAdminCountsApi3,_GetSubAdminCountsApi4,_GetSalesExecutivesAp3,_GetSalesExecutivesAp4;useBannerInfo(BannerInformation.subAdmin);const navigate=useNavigate();const theme=useTheme();//\tconst dispatch = useDispatch();\nconst{showAlertDialog,hideAlertDialog}=useAlertDialog();const{showSnackbar,hideSnackbar}=useSnackbar();const getStatus=useSubAdminStatus();const step=useRef(0);const GetSubAdminCountsApi=useGetSubAdminCountApi();const DeleteSalesExecutivesApi=useDeleteSalesExecutivesApi();const searchInputRef=useRef(null);const[selectedId,setSeletedId]=useState(false);const[pageRequest,setPageRequest]=useState({page:1,size:10});const[sortRequest,setSortRequest]=useState({});const GetSalesExecutivesApi=useGetSalesExecutivesApi({...pageRequest,...sortRequest,search:(_searchInputRef$curre=searchInputRef.current)===null||_searchInputRef$curre===void 0?void 0:_searchInputRef$curre.value});const handleKeyDown=event=>{if(event.key==='Enter'){void GetSalesExecutivesApi.refetch();}};const rows=(_GetSalesExecutivesAp=(_GetSalesExecutivesAp2=GetSalesExecutivesApi.data)===null||_GetSalesExecutivesAp2===void 0?void 0:_GetSalesExecutivesAp2.data.data)!==null&&_GetSalesExecutivesAp!==void 0?_GetSalesExecutivesAp:[];const handlePage=page=>{setPageRequest({...pageRequest,page});};const handleDelete=row=>{showAlertDialog({title:\"\".concat(row.status==='1'?'De-active':'Active',\" \").concat(row===null||row===void 0?void 0:row.first_name,\" \").concat(row===null||row===void 0?void 0:row.last_name,\"?\"),content:\"Are your sure ? You want to \".concat(row.status==='1'?'de-active':'active',\" restaurant.\"),buttons:[{children:'Cancel',variant:'outlined',callback:()=>{hideAlertDialog();}},{children:row.status==='1'?'Yes, Deactivate':'Yes, Activate',variant:'contained',callback:()=>{DeleteSalesExecutivesApi.mutateAsync({user_id:row.user_id,status:row.status==='1'?'deactivated':'active'}).then(response=>{var _response$data;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.message,onCancel:()=>hideSnackbar()});hideAlertDialog();void GetSalesExecutivesApi.refetch();}).catch(error=>{var _error$response,_error$response$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message,onCancel:()=>hideSnackbar()});});}}]});};const handleUpdateSubExcecutive=id=>{showAlertDialog({title:\"Do you want to update sub admin?\",content:/*#__PURE__*/_jsx(FormControl,{children:/*#__PURE__*/_jsx(RadioGroup,{defaultValue:0,onChange:e=>step.current=Number(e.target.value),children:SALES_EXECUTIVE_FORM_STEPS.map((s,i)=>/*#__PURE__*/_jsx(FormControlLabel,{value:i,control:/*#__PURE__*/_jsx(Radio,{}),label:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"h6\",children:s})},i))})}),buttons:[{children:'No',variant:'outlined',callback:()=>{hideAlertDialog();step.current=0;}},{children:'Yes',variant:'contained',callback:()=>{hideAlertDialog();navigate(\"/admin/subadmin/update/\".concat(id,\"/\").concat(String(step.current)));}}]});};const columns=[{field:'user_id',renderHeader:()=>'Id',renderCell:_ref=>{let{row}=_ref;return row.user_id;},sortable:true},{field:'first_name',renderHeader:()=>\"Name\",renderCell:_ref2=>{let{row}=_ref2;return\"\".concat(row.first_name,\" \").concat(row.last_name);},sortable:true,tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:'local_address',renderHeader:()=>\"Address\",renderCell:_ref3=>{let{row}=_ref3;return row.local_address;},sortable:true,tableCellTypographySx:{width:250},tableHeaderProps:{sx:{width:250}}},{field:'assign_work_location',renderHeader:()=>\"Work Area\",renderCell:_ref4=>{let{row}=_ref4;return row.assign_work_location;},tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:'mobile_no',renderHeader:()=>\"Phone No.\",renderCell:_ref5=>{let{row}=_ref5;return row.mobile_no;},tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:'qr_holding',renderHeader:()=>\"QR Holding\",renderCell:_ref6=>{let{row}=_ref6;return row.qr_holding;},sortable:true},{field:'status',renderHeader:()=>\"Status\",renderCell:_ref7=>{let{row}=_ref7;const status=getStatus(row.status);return/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:status.sx,children:status.lable});},sortable:true,tableCellTypographySx:{width:200},tableHeaderProps:{sx:{width:200}}},{field:'action',renderHeader:()=>\"Quick Action\",renderCell:_ref8=>{let{row}=_ref8;return/*#__PURE__*/_jsxs(Stack,{flexDirection:'row',gap:1,children:[/*#__PURE__*/_jsx(IconFinder,{iconName:\"OpenEye\",iconProps:{fill:theme.palette.secondary.main,cursor:'pointer',onClick:()=>setSeletedId(row.user_id)}}),/*#__PURE__*/_jsx(IconFinder,{iconName:\"DashCircle\",iconProps:{cursor:'pointer',fill:theme.palette.secondary.main,onClick:()=>handleDelete(row)}}),/*#__PURE__*/_jsx(IconFinder,{iconName:\"Pen\",iconProps:{cursor:'pointer',fill:theme.palette.secondary.main,onClick:()=>handleUpdateSubExcecutive(row.user_id)}})]});}}];const onCancelSearch=()=>{var _searchInputRef$curre2,_searchInputRef$curre3;if((_searchInputRef$curre2=searchInputRef.current)!==null&&_searchInputRef$curre2!==void 0&&_searchInputRef$curre2.value||((_searchInputRef$curre3=searchInputRef.current)===null||_searchInputRef$curre3===void 0?void 0:_searchInputRef$curre3.value)!==''){searchInputRef.current.value='';void GetSalesExecutivesApi.refetch();}};const handleBlockClick=value=>{searchInputRef.current.value=value;void GetSalesExecutivesApi.refetch();};return/*#__PURE__*/_jsxs(Stack,{gap:1,flexGrow:'inherit',children:[/*#__PURE__*/_jsxs(Stack,{gap:2,flexDirection:'row',children:[/*#__PURE__*/_jsx(AdminCards,{heading:\"Total Sub Admin\",content:(_GetSubAdminCountsApi=(_GetSubAdminCountsApi2=GetSubAdminCountsApi.data)===null||_GetSubAdminCountsApi2===void 0?void 0:_GetSubAdminCountsApi2.data.data.addedSubadminCount)!==null&&_GetSubAdminCountsApi!==void 0?_GetSubAdminCountsApi:'0',onClick:()=>handleBlockClick('')}),/*#__PURE__*/_jsx(AdminCards,{heading:\"Total Active\",content:(_GetSubAdminCountsApi3=(_GetSubAdminCountsApi4=GetSubAdminCountsApi.data)===null||_GetSubAdminCountsApi4===void 0?void 0:_GetSubAdminCountsApi4.data.data.activeSubadminCount)!==null&&_GetSubAdminCountsApi3!==void 0?_GetSubAdminCountsApi3:'0',sx:{'.heading':{color:theme.palette.success.main}},onClick:()=>handleBlockClick('active')})]}),/*#__PURE__*/_jsxs(Stack,{gap:2,flexDirection:'row',alignSelf:'self-end',children:[/*#__PURE__*/_jsx(TextField,{size:\"small\",placeholder:\"Search...\",InputProps:{startAdornment:/*#__PURE__*/_jsx(IconFinder,{iconName:\"Search\"}),endAdornment:/*#__PURE__*/_jsx(IconButton,{size:\"small\",sx:{padding:\"4px\"},onClick:onCancelSearch,children:/*#__PURE__*/_jsx(IconFinder,{iconName:\"Cancel\"})})},inputRef:searchInputRef,onKeyDown:handleKeyDown,sx:{'.MuiInputBase-input':{paddingLeft:1},'.MuiOutlinedInput-notchedOutline':{borderColor:'#E9ECEF'}}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",startIcon:/*#__PURE__*/_jsx(IconFinder,{iconName:\"Add\"}),onClick:()=>{navigate(\"/admin/subadmin/add\");},children:\"Add Sub Admin\"})]}),/*#__PURE__*/_jsxs(Stack,{gap:2,flexGrow:'inherit',children:[/*#__PURE__*/_jsx(Table,{rows:rows,columns:columns,rowId:row=>row.id,tableProps:{size:'small',stickyHeader:false},tableRowProps:{hover:true},onSortChange:sort=>{setSortRequest({sort_by:sort===null||sort===void 0?void 0:sort.field,order:sort===null||sort===void 0?void 0:sort.order});},loading:GetSalesExecutivesApi.isLoading}),/*#__PURE__*/_jsx(Pagination,{page:pageRequest.page,size:(_GetSalesExecutivesAp3=GetSalesExecutivesApi.data)===null||_GetSalesExecutivesAp3===void 0?void 0:_GetSalesExecutivesAp3.data.size,totalPages:(_GetSalesExecutivesAp4=GetSalesExecutivesApi.data)===null||_GetSalesExecutivesAp4===void 0?void 0:_GetSalesExecutivesAp4.data.pagesTotal,onPageChange:handlePage})]}),selectedId&&/*#__PURE__*/_jsx(SalesExecutivesDetails,{selectedId:selectedId,onClose:()=>setSeletedId(false)})]});};export default/*#__PURE__*/memo(Dashboard);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
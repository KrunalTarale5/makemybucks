{"ast":null,"code":"import{Button,Stack,Checkbox,FormControlLabel,Alert,Collapse}from'@mui/material';import IconFinder from'@components/Icon';import InputField from'@components/InputField';import{InterTypography}from'@components/Typography';import{LoginFormFields,useLoginApi,validateLoginFields,validateLoginForm}from'@hooks/admin-login';import{memo,useEffect,useState}from'react';import AuthWrapper from'../../../@components/AuthWrapper';import{useLocation,useNavigate}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{setToken,setUserInfo}from'_store/actions/ui-actions';import{LoadingButton}from'@mui/lab';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const intialFormData={admin_user_id:'',admin_password:''//captcha: '',\n};const intialFormError={admin_user_id:'',admin_password:''//captcha: '',\n};const Login=()=>{const{userInfo,token}=useSelector(state=>state.richPenny);const[formData,setFormData]=useState(intialFormData);const[formError,setFormError]=useState(intialFormError);const LoginApi=useLoginApi();const navigate=useNavigate();const dispatch=useDispatch();const location=useLocation();useEffect(()=>{if(userInfo&&token&&location.pathname==='/admin/login'){navigate('/admin/home',{replace:true});}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[location.pathname]);const onChange=(fieldName,value)=>{const _formData={...formData,[fieldName]:value};setFormData(_formData);setFormError({...formError,[fieldName]:validateLoginFields(fieldName,_formData)});};const handleLogin=()=>{const validatation=validateLoginForm(formData);if(validatation.hasError){setFormError(validatation.errors);return;}void LoginApi.mutateAsync({request:formData}).then(response=>{var _response$data$user_d,_response$data$user_d2,_response$data$user_d3;navigate(\"/admin/home\",{replace:true});dispatch(setToken(response.data.access_token));dispatch(setUserInfo({id:(_response$data$user_d=response.data.user_data)===null||_response$data$user_d===void 0?void 0:_response$data$user_d.admin_user_id,name:(_response$data$user_d2=response.data.user_data)===null||_response$data$user_d2===void 0?void 0:_response$data$user_d2.admin_name,avatar:(_response$data$user_d3=response.data.user_data)===null||_response$data$user_d3===void 0?void 0:_response$data$user_d3.admin_profile,email:response.data.user_data.email,mobile_no:response.data.user_data.mobile_no}));});};const handleForgetPassword=()=>{navigate(\"/admin/forgot-password\");};return/*#__PURE__*/_jsx(AuthWrapper,{backgroundImage:true,children:/*#__PURE__*/_jsxs(Stack,{alignItems:'center',gap:5,children:[/*#__PURE__*/_jsx(IconFinder,{iconName:\"DesktopResetLogo\"}),/*#__PURE__*/_jsx(Collapse,{in:LoginApi.isError,unmountOnExit:true,children:/*#__PURE__*/_jsx(Alert,{variant:\"standard\",severity:\"error\",icon:/*#__PURE__*/_jsx(IconFinder,{iconName:\"WarningDanger\"}),sx:{fontFamily:\"inter\",alignItems:'center'},children:\"Incorrect User ID or Password. Try Again!\"})}),/*#__PURE__*/_jsxs(Stack,{gap:4,width:\"100%\",alignItems:'center',children:[/*#__PURE__*/_jsx(InterTypography,{variant:\"h4\",color:'white',children:\"Admin Dashboard Login\"}),/*#__PURE__*/_jsxs(Stack,{gap:2,width:\"100%\",children:[Object.entries(LoginFormFields).map(v=>{const fieldName=v[0];const fieldProps=v[1];return/*#__PURE__*/_jsx(InputField,{fieldName:fieldName,value:formData[fieldName],fieldProps:{...fieldProps,color:'secondary',fullWidth:true,sx:{'.MuiTypography-subtitle1':{color:\"white\",fontFamily:'inter'},'& .MuiOutlinedInput-notchedOutline':{color:\"white\",borderColor:\"white !important\"},'& .MuiInputBase-input':{color:\"white\",height:27}},error:Boolean(formError[fieldName]),helperText:formError[fieldName]},fieldType:fieldProps.fieldType,onChange:onChange},fieldName);}),/*#__PURE__*/_jsxs(Stack,{flexDirection:'row',justifyContent:'space-between',alignItems:'center',children:[/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{sx:{color:'white !important'}}),label:/*#__PURE__*/_jsx(InterTypography,{color:'white',variant:\"body2\",children:\"Remember me?\"})}),/*#__PURE__*/_jsx(Button,{variant:\"text\",size:\"small\",color:\"ternary\",sx:{height:'fit-content'},onClick:handleForgetPassword,children:/*#__PURE__*/_jsx(InterTypography,{variant:\"body2\",children:\"Forgot Password?\"})})]})]}),/*#__PURE__*/_jsx(LoadingButton,{variant:\"contained\",size:\"large\",color:\"ternary\",fullWidth:true,onClick:handleLogin,loading:LoginApi.isLoading,sx:{height:\"66px\"},children:/*#__PURE__*/_jsx(InterTypography,{variant:\"h5\",fontWeight:600,children:\"Login\"})})]})]})});};export default/*#__PURE__*/memo(Login);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
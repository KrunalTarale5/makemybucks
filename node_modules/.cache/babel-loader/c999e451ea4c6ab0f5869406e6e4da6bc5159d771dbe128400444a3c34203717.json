{"ast":null,"code":"import IconFinder from'@components/Icon';import InputField from'@components/InputField';import{useSnackbar}from'@components/Snackbar';import{PoppinsTypography}from'@components/Typography';import{BannerInformation,useBannerInfo}from'@hooks/admin-banner-info';import{useAddAgreementPeriodApi,useAddAssignLocationTypeApi,useAddCuisineTypeApi,useAddNotificationCategoryApi,useAddRejectedReasonApi,useAddRestaurantTypeApi,useGetAgreementPeriodApi,useGetAssignLocationTypeApi,useGetCuisineTypeApi,useGetNotificationCategoryApi,useGetRejectedReasonApi,useGetRestaurantTypeApi,useUpdateAgreementPeriodApi,useUpdateAssignLocationTypeApi,useUpdateCuisineTypeApi,useUpdateNotificationCategoryApi,useUpdateRejectedReasonApi,useUpdateRestaurantTypeApi}from'@hooks/admin-master-list';import{LoadingButton}from'@mui/lab';import{Accordion,AccordionDetails,AccordionSummary,Dialog,DialogContent,DialogTitle,Divider,IconButton,List,ListItem,Stack,useTheme}from'@mui/material';import React,{useState,memo,useEffect}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const Lists=['Veg Restaurant','Non Veg Restaurant','South Indian Restaurant','Chinese Restaurant'];const AllMasterList=()=>{var _GetRestaurantTypeApi,_GetCuisineTypeApi$da,_GetAgreementPeriodAp,_GetAssignLocationTyp,_GetNotificationCateg,_GetRejectedReasonApi,_GetRejectedReasonApi2,_updateType$type;const theme=useTheme();useBannerInfo(BannerInformation.masterList);const{showSnackbar,hideSnackbar}=useSnackbar();const GetRestaurantTypeApi=useGetRestaurantTypeApi();const GetCuisineTypeApi=useGetCuisineTypeApi();const GetAgreementPeriodApi=useGetAgreementPeriodApi();const GetAssignLocationTypeApi=useGetAssignLocationTypeApi();const GetNotificationCategoryApi=useGetNotificationCategoryApi();const GetRejectedReasonApi=useGetRejectedReasonApi();const AddRestaurantTypeApi=useAddRestaurantTypeApi();const AddCuisineTypeApi=useAddCuisineTypeApi();const AddAgreementPeriodApi=useAddAgreementPeriodApi();const AddAssignLocationTypeApi=useAddAssignLocationTypeApi();const AddNotificationCategoryApi=useAddNotificationCategoryApi();const AddRejectedReasonApi=useAddRejectedReasonApi();const UpdateRestaurantTypeApi=useUpdateRestaurantTypeApi();const UpdateCuisineTypeApi=useUpdateCuisineTypeApi();const UpdateAgreementPeriodApi=useUpdateAgreementPeriodApi();const UpdateAssignLocationTypeApi=useUpdateAssignLocationTypeApi();const UpdateNotificationCategoryApi=useUpdateNotificationCategoryApi();const UpdateRejectedReasonApi=useUpdateRejectedReasonApi();const[addNewType,setAddNewType]=useState(false);const[updateType,setUpdateType]=useState(null);const[expandAccordian,setExpandAccordian]=useState(false);const handleAddTypes=(type,value)=>{switch(type){case'Restaurant Type':void AddRestaurantTypeApi.mutateAsync({request:{type_name:value}}).then(response=>{var _response$data;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.message,onCancel:()=>hideSnackbar()});setAddNewType(false);void GetRestaurantTypeApi.refetch();}).catch(error=>{var _error$response,_error$response$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message,onCancel:()=>hideSnackbar()});});break;case'Cuisine Type':void AddCuisineTypeApi.mutateAsync({request:{cuisine_name:value}}).then(response=>{var _response$data2;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data2=response.data)===null||_response$data2===void 0?void 0:_response$data2.message,onCancel:()=>hideSnackbar()});setAddNewType(false);void GetCuisineTypeApi.refetch();}).catch(error=>{var _error$response2,_error$response2$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message,onCancel:()=>hideSnackbar()});});break;case'Agreement Period':void AddAgreementPeriodApi.mutateAsync({request:{period:value}}).then(response=>{var _response$data3;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data3=response.data)===null||_response$data3===void 0?void 0:_response$data3.message,onCancel:()=>hideSnackbar()});setAddNewType(false);void GetAgreementPeriodApi.refetch();}).catch(error=>{var _error$response3,_error$response3$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message,onCancel:()=>hideSnackbar()});});break;case'Assign Location':void AddAssignLocationTypeApi.mutateAsync({request:{location:value}}).then(response=>{var _response$data4;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data4=response.data)===null||_response$data4===void 0?void 0:_response$data4.message,onCancel:()=>hideSnackbar()});setAddNewType(false);void GetAssignLocationTypeApi.refetch();}).catch(error=>{var _error$response4,_error$response4$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message,onCancel:()=>hideSnackbar()});});break;case'Notification Category':void AddNotificationCategoryApi.mutateAsync({request:{message_category:value}}).then(response=>{var _response$data5;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data5=response.data)===null||_response$data5===void 0?void 0:_response$data5.message,onCancel:()=>hideSnackbar()});setAddNewType(false);void GetNotificationCategoryApi.refetch();}).catch(error=>{var _error$response5,_error$response5$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message,onCancel:()=>hideSnackbar()});});break;case'Document Rejection':void AddRejectedReasonApi.mutateAsync({request:{reject_reason:value}}).then(response=>{var _response$data6;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data6=response.data)===null||_response$data6===void 0?void 0:_response$data6.message,onCancel:()=>hideSnackbar()});setAddNewType(false);void GetNotificationCategoryApi.refetch();}).catch(error=>{var _error$response6,_error$response6$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message,onCancel:()=>hideSnackbar()});});break;default:break;}};const handleUpdateTypes=(type,itemToUpdate)=>{switch(type){case'Restaurant Type':void UpdateRestaurantTypeApi.mutateAsync({request:{new_type_name:itemToUpdate.label},id:itemToUpdate.value}).then(response=>{var _response$data7;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data7=response.data)===null||_response$data7===void 0?void 0:_response$data7.message,onCancel:()=>hideSnackbar()});setUpdateType(null);void GetRestaurantTypeApi.refetch();}).catch(error=>{var _error$response7,_error$response7$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response7=error.response)===null||_error$response7===void 0?void 0:(_error$response7$data=_error$response7.data)===null||_error$response7$data===void 0?void 0:_error$response7$data.message,onCancel:()=>hideSnackbar()});});break;case'Cuisine Type':void UpdateCuisineTypeApi.mutateAsync({request:{new_cuisine_name:itemToUpdate.label},id:itemToUpdate.value}).then(response=>{var _response$data8;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data8=response.data)===null||_response$data8===void 0?void 0:_response$data8.message,onCancel:()=>hideSnackbar()});setUpdateType(null);void GetCuisineTypeApi.refetch();}).catch(error=>{var _error$response8,_error$response8$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response8=error.response)===null||_error$response8===void 0?void 0:(_error$response8$data=_error$response8.data)===null||_error$response8$data===void 0?void 0:_error$response8$data.message,onCancel:()=>hideSnackbar()});});break;case'Agreement Period':void UpdateAgreementPeriodApi.mutateAsync({request:{new_period_name:itemToUpdate.label},id:itemToUpdate.value}).then(response=>{var _response$data9;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data9=response.data)===null||_response$data9===void 0?void 0:_response$data9.message,onCancel:()=>hideSnackbar()});setUpdateType(null);void GetAgreementPeriodApi.refetch();}).catch(error=>{var _error$response9,_error$response9$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response9=error.response)===null||_error$response9===void 0?void 0:(_error$response9$data=_error$response9.data)===null||_error$response9$data===void 0?void 0:_error$response9$data.message,onCancel:()=>hideSnackbar()});});break;case'Assign Location':void UpdateAssignLocationTypeApi.mutateAsync({request:{new_location:itemToUpdate.label},id:itemToUpdate.value}).then(response=>{var _response$data10;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data10=response.data)===null||_response$data10===void 0?void 0:_response$data10.message,onCancel:()=>hideSnackbar()});setUpdateType(null);void GetAssignLocationTypeApi.refetch();}).catch(error=>{var _error$response10,_error$response10$dat;showSnackbar({title:'Error!',variant:'error',content:(_error$response10=error.response)===null||_error$response10===void 0?void 0:(_error$response10$dat=_error$response10.data)===null||_error$response10$dat===void 0?void 0:_error$response10$dat.message,onCancel:()=>hideSnackbar()});});break;case'Notification Category':void UpdateNotificationCategoryApi.mutateAsync({request:{new_message_category:itemToUpdate.label},id:itemToUpdate.value}).then(response=>{var _response$data11;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data11=response.data)===null||_response$data11===void 0?void 0:_response$data11.message,onCancel:()=>hideSnackbar()});setUpdateType(null);void GetNotificationCategoryApi.refetch();}).catch(error=>{var _error$response11,_error$response11$dat;showSnackbar({title:'Error!',variant:'error',content:(_error$response11=error.response)===null||_error$response11===void 0?void 0:(_error$response11$dat=_error$response11.data)===null||_error$response11$dat===void 0?void 0:_error$response11$dat.message,onCancel:()=>hideSnackbar()});});break;case'Document Rejection':void UpdateRejectedReasonApi.mutateAsync({request:{new_reject_reason:itemToUpdate.label},id:itemToUpdate.value}).then(response=>{var _response$data12;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data12=response.data)===null||_response$data12===void 0?void 0:_response$data12.message,onCancel:()=>hideSnackbar()});setUpdateType(null);void GetNotificationCategoryApi.refetch();}).catch(error=>{var _error$response12,_error$response12$dat;showSnackbar({title:'Error!',variant:'error',content:(_error$response12=error.response)===null||_error$response12===void 0?void 0:(_error$response12$dat=_error$response12.data)===null||_error$response12$dat===void 0?void 0:_error$response12$dat.message,onCancel:()=>hideSnackbar()});});break;default:break;}};const handleAccExpand=panel=>(event,isExpanded)=>{setExpandAccordian(isExpanded?panel:false);};return/*#__PURE__*/_jsxs(Stack,{gap:5,paddingBottom:3,children:[/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"h5\",sx:{color:theme.palette.common.primaryGreyText},children:\"All Master List\"}),/*#__PURE__*/_jsxs(Stack,{gap:2,children:[/*#__PURE__*/_jsxs(Accordion,{TransitionProps:{unmountOnExit:true},expanded:expandAccordian==='Restaurant List',onChange:handleAccExpand('Restaurant List'),children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(IconFinder,{iconName:\"CircleArrowDown\"}),children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"h6\",sx:{color:theme.palette.common.primaryGreyText},children:\"Restaurant List\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsxs(Stack,{flexBasis:\"25%\",flexDirection:'row',gap:10,children:[/*#__PURE__*/_jsx(ListWrapper,{heading:\"Restaurant Type\",onAddClick:()=>setAddNewType('Restaurant Type'),onEditItemClick:item=>setUpdateType({item,type:'Restaurant Type'}),data:(_GetRestaurantTypeApi=GetRestaurantTypeApi.data)===null||_GetRestaurantTypeApi===void 0?void 0:_GetRestaurantTypeApi.data.restaurantTypeData.map(d=>({label:d.type_name,value:d.id}))}),/*#__PURE__*/_jsx(ListWrapper,{heading:\"Cuisine Type\",onAddClick:()=>setAddNewType('Cuisine Type'),onEditItemClick:item=>setUpdateType({item,type:'Cuisine Type'}),data:(_GetCuisineTypeApi$da=GetCuisineTypeApi.data)===null||_GetCuisineTypeApi$da===void 0?void 0:_GetCuisineTypeApi$da.data.cuisineData.map(d=>({label:d.cuisine_name,value:d.id}))})]})})]}),/*#__PURE__*/_jsxs(Accordion,{TransitionProps:{unmountOnExit:true},expanded:expandAccordian==='Sub Admin List',onChange:handleAccExpand('Sub Admin List'),children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(IconFinder,{iconName:\"CircleArrowDown\"}),children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"h6\",sx:{color:theme.palette.common.primaryGreyText},children:\"Sub Admin List\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsxs(Stack,{flexBasis:\"25%\",flexDirection:'row',gap:10,children:[/*#__PURE__*/_jsx(ListWrapper,{heading:\"Agreement Period\",onAddClick:()=>setAddNewType('Agreement Period'),onEditItemClick:item=>setUpdateType({item,type:'Agreement Period'}),data:(_GetAgreementPeriodAp=GetAgreementPeriodApi.data)===null||_GetAgreementPeriodAp===void 0?void 0:_GetAgreementPeriodAp.data.onbordingPeriodsData.map(d=>({label:d.period,value:d.id}))}),/*#__PURE__*/_jsx(ListWrapper,{heading:\"Assign Location\",onAddClick:()=>setAddNewType('Assign Location'),onEditItemClick:item=>setUpdateType({item,type:'Assign Location'}),data:(_GetAssignLocationTyp=GetAssignLocationTypeApi.data)===null||_GetAssignLocationTyp===void 0?void 0:_GetAssignLocationTyp.data.onbordingLocationData.map(d=>({label:d.location_name,value:d.id}))})]})})]}),/*#__PURE__*/_jsxs(Accordion,{TransitionProps:{unmountOnExit:true},expanded:expandAccordian==='Notifications',onChange:handleAccExpand('Notifications'),children:[/*#__PURE__*/_jsx(AccordionSummary,{expandIcon:/*#__PURE__*/_jsx(IconFinder,{iconName:\"CircleArrowDown\"}),children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"h6\",sx:{color:theme.palette.common.primaryGreyText},children:\"Notifications\"})}),/*#__PURE__*/_jsx(AccordionDetails,{children:/*#__PURE__*/_jsxs(Stack,{flexBasis:\"25%\",flexDirection:'row',gap:10,children:[/*#__PURE__*/_jsx(ListWrapper,{heading:\"Notification Category\",onAddClick:()=>setAddNewType('Notification Category'),onEditItemClick:item=>setUpdateType({item,type:'Notification Category'}),data:(_GetNotificationCateg=GetNotificationCategoryApi.data)===null||_GetNotificationCateg===void 0?void 0:_GetNotificationCateg.data.categoryData.map(d=>({label:d.message_category,value:d.msg_category_id}))}),/*#__PURE__*/_jsx(ListWrapper,{heading:\"Document Rejection\",onAddClick:()=>setAddNewType('Document Rejection'),onEditItemClick:item=>setUpdateType({item,type:'Document Rejection'}),data:(_GetRejectedReasonApi=GetRejectedReasonApi.data)===null||_GetRejectedReasonApi===void 0?void 0:(_GetRejectedReasonApi2=_GetRejectedReasonApi.data.reject_reason_data)===null||_GetRejectedReasonApi2===void 0?void 0:_GetRejectedReasonApi2.map(d=>({label:d.reject_reason,value:d.id.toString()}))})]})})]})]}),/*#__PURE__*/_jsx(AddNewInputDialog,{heading:(_updateType$type=updateType===null||updateType===void 0?void 0:updateType.type)!==null&&_updateType$type!==void 0?_updateType$type:addNewType,loading:AddRestaurantTypeApi.isLoading||UpdateRestaurantTypeApi.isLoading,updateItem:updateType===null||updateType===void 0?void 0:updateType.item,handleClose:()=>{setAddNewType(false);setUpdateType(null);},onAddClick:handleAddTypes,onUpdateClick:handleUpdateTypes})]});};export default/*#__PURE__*/memo(AllMasterList);const ListWrapper=/*#__PURE__*/memo(props=>{var _props$data,_props$data2;const theme=useTheme();return/*#__PURE__*/_jsxs(Stack,{gap:2,width:\"25%\",children:[/*#__PURE__*/_jsxs(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:[props.heading,\" (\",(_props$data=props.data)===null||_props$data===void 0?void 0:_props$data.length,\")\"]}),/*#__PURE__*/_jsx(List,{sx:{borderRadius:\"8px !important\",borderWidth:1,borderStyle:'solid',borderColor:'#DFE3ED',backgroundColor:'#F3F4F8',maxHeight:200,overflow:'auto'},children:(_props$data2=props.data)===null||_props$data2===void 0?void 0:_props$data2.map((l,index)=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ListItem,{alignItems:\"flex-start\",secondaryAction:/*#__PURE__*/_jsx(IconButton,{edge:\"end\",size:\"small\",onClick:e=>{var _props$onEditItemClic;return(_props$onEditItemClic=props.onEditItemClick)===null||_props$onEditItemClic===void 0?void 0:_props$onEditItemClic.call(props,l,e);},children:/*#__PURE__*/_jsx(IconFinder,{iconName:\"Pen\",iconProps:{width:20,height:20,fill:theme.palette.common.primaryGreyText}})}),children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",children:l.label})}),Lists.length!==index+1&&/*#__PURE__*/_jsx(Divider,{variant:\"inset\",component:\"li\",sx:{borderColor:'#DFE3ED',marginX:2}})]}))}),(props===null||props===void 0?void 0:props.onAddClick)&&/*#__PURE__*/_jsx(LoadingButton,{size:\"large\",variant:\"outlined\",color:\"inherit\",startIcon:/*#__PURE__*/_jsx(IconFinder,{iconName:\"Add\",iconProps:{fill:theme.palette.common.secondaryGreyText}}),sx:{borderColor:theme.palette.common.secondaryGreyText,alignSelf:'self-start'},onClick:props.onAddClick,children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle2\",children:\"Add New\"})})]});});const AddNewInputDialog=props=>{const theme=useTheme();const[value,setValue]=useState('');const onChange=(fieldName,value)=>{setValue(value);};useEffect(()=>{var _props$updateItem$lab,_props$updateItem;setValue((_props$updateItem$lab=(_props$updateItem=props.updateItem)===null||_props$updateItem===void 0?void 0:_props$updateItem.label)!==null&&_props$updateItem$lab!==void 0?_props$updateItem$lab:'');},[props.updateItem]);useEffect(()=>{if(!props.heading){setValue('');}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[Boolean(props.heading)]);return/*#__PURE__*/_jsxs(Dialog,{onClose:props.handleClose,open:Boolean(props.heading),maxWidth:\"sm\",sx:{'.MuiPaper-root':{width:\"100%\"}},children:[/*#__PURE__*/_jsx(DialogTitle,{sx:{padding:4,paddingBottom:3},children:/*#__PURE__*/_jsxs(PoppinsTypography,{variant:\"h4\",sx:{color:theme.palette.common.primaryGreyText},children:[props.updateItem?'Update':'Add',\" \",props.heading]})}),/*#__PURE__*/_jsxs(DialogContent,{sx:{display:'flex',flexDirection:'column',gap:6,padding:4},children:[/*#__PURE__*/_jsx(InputField,{fieldName:\"add\",value:value,fieldProps:{placeholder:'Type here to add',fullWidth:true,size:'medium',sx:{'.MuiInputBase-root':{borderRadius:'8px'}}},onChange:onChange}),/*#__PURE__*/_jsxs(Stack,{flexDirection:'row',gap:2,alignSelf:'self-end',children:[/*#__PURE__*/_jsx(LoadingButton,{variant:\"outlined\",size:\"large\",sx:{width:166},onClick:props.handleClose,children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"h5\",sx:{color:theme.palette.common.primaryGreyText},children:\"Cancel\"})}),props.updateItem?/*#__PURE__*/_jsx(LoadingButton,{variant:\"contained\",size:\"large\",sx:{width:166},loading:props.loading,onClick:e=>{var _props$onUpdateClick,_props$updateItem$val,_props$updateItem2;return(_props$onUpdateClick=props.onUpdateClick)===null||_props$onUpdateClick===void 0?void 0:_props$onUpdateClick.call(props,props.heading,{value:(_props$updateItem$val=(_props$updateItem2=props.updateItem)===null||_props$updateItem2===void 0?void 0:_props$updateItem2.value)!==null&&_props$updateItem$val!==void 0?_props$updateItem$val:'',label:value},e);},children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"h5\",children:\"Update\"})}):/*#__PURE__*/_jsx(LoadingButton,{variant:\"contained\",size:\"large\",sx:{width:166},loading:props.loading,onClick:e=>{var _props$onAddClick;return(_props$onAddClick=props.onAddClick)===null||_props$onAddClick===void 0?void 0:_props$onAddClick.call(props,props.heading,value,e);},children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"h5\",children:\"Add\"})})]})]})]});};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
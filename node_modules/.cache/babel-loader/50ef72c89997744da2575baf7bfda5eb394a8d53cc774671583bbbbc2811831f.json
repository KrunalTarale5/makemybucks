{"ast":null,"code":"import IconFinder from'@components/Icon';import InputField from'@components/InputField';import{PoppinsTypography}from'@components/Typography';import Uploader from'@components/Uploader';import{BasicDetailsFormFields,UpdateSalesExecutiveContext,validateBasicDetailFields,validateBasicDetailForm}from'@hooks/admin-update-sales-executive';import{Checkbox,FormControlLabel,Grid,Stack}from'@mui/material';import{memo,useContext,useEffect,useState}from'react';import NavigateButtons from'../NavigateButtons';import{validateIsMobileNumber,validateIsNumber}from'@utils/validator';import{useVerifySalesExecutivesMobileNumberApi}from'@hooks/admin-add-sales-executive';import{useSnackbar}from'@components/Snackbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const intialFormData=formData=>({first_name:formData===null||formData===void 0?void 0:formData.first_name,last_name:formData===null||formData===void 0?void 0:formData.last_name,email:formData===null||formData===void 0?void 0:formData.email,reEmail:formData===null||formData===void 0?void 0:formData.email,mobile_no:formData===null||formData===void 0?void 0:formData.mobile_no,personal_no:formData===null||formData===void 0?void 0:formData.personal_no,profile_pic:formData===null||formData===void 0?void 0:formData.profile_pic});const intialFormError={first_name:'',last_name:'',email:'',reEmail:'',mobile_no:'',personal_no:'',profile_pic:''};const BasicDetailsForm=()=>{const{showSnackbar,hideSnackbar}=useSnackbar();const formContext=useContext(UpdateSalesExecutiveContext);const[formData,setFormData]=useState(intialFormData(formContext.formData));const[formError,setFormError]=useState(intialFormError);const VerifySalesExecutivesMobileNumberApi=useVerifySalesExecutivesMobileNumberApi();useEffect(()=>{var _formContext$formData;setFormData({...formContext.formData,reEmail:(_formContext$formData=formContext.formData)===null||_formContext$formData===void 0?void 0:_formContext$formData.email});},[formContext.formData]);const onChange=(fieldName,value,fieldType)=>{let _formData={};if(fieldType==='number'){const isNumber=validateIsNumber(String(value));_formData={...formData,[fieldName]:isNumber?value:formData[fieldName]};}else if(fieldType==='mobile-number'){const isNumber=validateIsMobileNumber(String(value));_formData={...formData,[fieldName]:isNumber?value:formData[fieldName]};}else{_formData={...formData,[fieldName]:value};}setFormData(_formData);setFormError({...formError,[fieldName]:validateBasicDetailFields(fieldName,_formData)});};const handleNextClick=()=>{const validatation=validateBasicDetailForm(formData);if(validatation.hasError){setFormError(validatation.errors);return;}if(formData.mobile_no===formContext.formData.mobile_no){formContext.setFormData({...formContext.formData,...formData});formContext.setActiveStep(formContext.activeStep+1);return;}VerifySalesExecutivesMobileNumberApi.mutateAsync({subadmin_contact_no:formData.mobile_no}).then(()=>{formContext.setFormData({...formContext.formData,...formData});formContext.setActiveStep(formContext.activeStep+1);}).catch(error=>{var _error$response,_error$response$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message,onCancel:()=>hideSnackbar()});});};return/*#__PURE__*/_jsxs(Stack,{gap:6,alignItems:'flex-start',children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:4,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:7,display:'inline-grid',gridTemplateColumns:\"1fr 1fr\",rowGap:3,columnGap:2,children:Object.entries(BasicDetailsFormFields).map(v=>{var _ref;const fieldName=v[0];const fieldProps=v[1];return/*#__PURE__*/_jsx(InputField,{fieldName:fieldName,value:(_ref=formData===null||formData===void 0?void 0:formData[fieldName])!==null&&_ref!==void 0?_ref:'',fieldProps:{...fieldProps,color:'secondary',fullWidth:true,sx:{gap:0,'.MuiTypography-subtitle1':{fontFamily:'Poppins',fontSize:\"14px\"}},error:Boolean(formError[fieldName]),helperText:formError[fieldName]},fieldType:fieldProps.fieldType,addons:fieldName==='personal_no'&&/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Checkbox,{color:\"primary\",size:\"small\",onChange:e=>{setFormData({...formData,personal_no:e.target.checked?formData.mobile_no:''});if(e.target.checked){setFormError({...formError,[fieldName]:validateBasicDetailFields(fieldName,{...formData,[fieldName]:formData.mobile_no})});}}}),label:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",children:\"Same as Mobile Number\"})}),onChange:onChange},fieldName);})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:4,sx:{textAlign:'-webkit-right'},children:/*#__PURE__*/_jsx(Uploader,{fieldName:\"fieldName\",sx:{placeContent:'flex-end',width:266,height:266},onChange:e=>{var _e$target;setFormData({...formData,profile_pic:(_e$target=e.target)===null||_e$target===void 0?void 0:_e$target.files});},file:formData===null||formData===void 0?void 0:formData.profile_pic,children:/*#__PURE__*/_jsx(IconFinder,{iconName:\"UploadPicture\"})})})]}),/*#__PURE__*/_jsx(NavigateButtons,{onNextClick:handleNextClick})]});};export default/*#__PURE__*/memo(BasicDetailsForm);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import DetailsTable from'@components/DetailsTable';import InputField from'@components/InputField';import{PoppinsTypography}from'@components/Typography';import Uploader from'@components/Uploader';import{AddSalesExecutiveContext,AssignRoleFormFields,addSubAdminApi,useGetAssignRolesApi,useGetWorkLocationApi,validateAssignRoleFields,validateAssignRoleForm}from'@hooks/admin-add-sales-executive';import{Grid,Stack,useTheme}from'@mui/material';import{memo,useContext,useState}from'react';import NavigateButtons from'../NavigateButtons';import{useNavigate}from'react-router-dom';import{useSnackbar}from'@components/Snackbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const intialFormData=formData=>({assign_role:formData.assign_role,assign_work_location:formData.assign_work_location});const intialFormError={assign_role:'',assign_work_location:''};const AssignRoleForm=()=>{var _formContext$formData3,_formContext$formData4;const theme=useTheme();const navigate=useNavigate();const{showSnackbar,hideSnackbar}=useSnackbar();const formContext=useContext(AddSalesExecutiveContext);const GetAssignRolesApi=useGetAssignRolesApi();const GetWorkLocationApi=useGetWorkLocationApi();const[formData,setFormData]=useState(intialFormData(formContext.formData));const[formError,setFormError]=useState(intialFormError);const[isLoading,setIsLoading]=useState(false);const onChange=(fieldName,value)=>{let _formData={};_formData={...formData,[fieldName]:value};setFormData(_formData);setFormError({...formError,[fieldName]:validateAssignRoleFields(fieldName,_formData)});};const handleCreateClick=()=>{var _formContext$formData,_formContext$formData2;const validatation=validateAssignRoleForm(formData);if(validatation.hasError){setFormError(validatation.errors);return;}setIsLoading(true);addSubAdminApi({...formContext.formData,assign_role:formData.assign_role.label,assign_work_location:formData.assign_work_location.label,local_state:(_formContext$formData=formContext.formData.local_state)===null||_formContext$formData===void 0?void 0:_formContext$formData.label,permanent_state:(_formContext$formData2=formContext.formData.permanent_state)===null||_formContext$formData2===void 0?void 0:_formContext$formData2.label}).then(response=>{var _response$data;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.message,onCancel:()=>hideSnackbar()});navigate('/admin/subadmin');setIsLoading(false);}).catch(error=>{var _error$response,_error$response$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message,onCancel:()=>hideSnackbar()});setIsLoading(false);});};const handlePreviousClick=()=>{formContext.setActiveStep(formContext.activeStep-1);};const getOptions=fieldName=>{var _GetAssignRolesApi$da,_GetWorkLocationApi$d,_GetWorkLocationApi$d2,_GetWorkLocationApi$d3;switch(fieldName){case'assign_role':return(_GetAssignRolesApi$da=GetAssignRolesApi.data)===null||_GetAssignRolesApi$da===void 0?void 0:_GetAssignRolesApi$da.data.subAdminRolesData.map(r=>({label:r.roles,value:r.id}));case'assign_work_location':return(_GetWorkLocationApi$d=GetWorkLocationApi.data)===null||_GetWorkLocationApi$d===void 0?void 0:(_GetWorkLocationApi$d2=(_GetWorkLocationApi$d3=_GetWorkLocationApi$d.data.location_data).map)===null||_GetWorkLocationApi$d2===void 0?void 0:_GetWorkLocationApi$d2.call(_GetWorkLocationApi$d3,l=>({label:l.location_name,value:l.id}));default:break;}};return/*#__PURE__*/_jsxs(Stack,{gap:6,alignItems:'flex-start',children:[/*#__PURE__*/_jsxs(Stack,{width:\"100%\",flexDirection:'row',children:[/*#__PURE__*/_jsxs(Stack,{flexBasis:\"55%\",sx:{'& table':{borderCollapse:'separate',borderSpacing:\"0 24px\"},'& td':{minWidth:\"200px\"},'& tr':{verticalAlign:'top'}},children:[/*#__PURE__*/_jsx(DetailsTable,{data:[// {\n// \tname: (\n// \t\t<PoppinsTypography\n// \t\t\tvariant='subtitle1'\n// \t\t\tsx={{ color: theme.palette.common.secondaryGreyText }}\n// \t\t>{`ID:`}</PoppinsTypography>\n// \t),\n// \tvalue: (\n// \t\t<PoppinsTypography\n// \t\t\tvariant='subtitle1'\n// \t\t\tsx={{ color: theme.palette.common.primaryGreyText }}\n// \t\t>\n// \t\t\t--\n// \t\t</PoppinsTypography>\n// \t),\n// \tshowWhen: true,\n// },\n{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Name:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:\"\".concat(formContext.formData.first_name,\" \").concat(formContext.formData.last_name)}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Email ID:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:formContext.formData.email}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Phone Number:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:formContext.formData.mobile_no}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Personal Number:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:formContext.formData.personal_no}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Local Address:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:\"\".concat(formContext.formData.local_flat_no,\" \").concat(formContext.formData.local_street_name,\" \").concat(formContext.formData.local_city,\" \").concat((_formContext$formData3=formContext.formData.local_state)===null||_formContext$formData3===void 0?void 0:_formContext$formData3.label,\" \").concat(formContext.formData.local_pin_code,\" \")}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Permanent Address:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:\"\".concat(formContext.formData.permanent_flat_no,\" \").concat(formContext.formData.permanent_street_name,\" \").concat(formContext.formData.permanent_city,\" \").concat((_formContext$formData4=formContext.formData.permanent_state)===null||_formContext$formData4===void 0?void 0:_formContext$formData4.label,\" \").concat(formContext.formData.permanent_pin_code)}),showWhen:true},{name:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.secondaryGreyText},children:\"Aadhar Number:\"}),value:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.primaryGreyText},children:formContext.formData.aadhar_no}),showWhen:true}]}),/*#__PURE__*/_jsx(Grid,{container:true,spacing:4,children:/*#__PURE__*/_jsx(Grid,{item:true,xs:10,display:'inline-grid',gridTemplateColumns:\"1fr 1fr\",rowGap:3,columnGap:2,children:Object.entries(AssignRoleFormFields).map(v=>{var _ref;const fieldName=v[0];const fieldProps=v[1];return/*#__PURE__*/_jsx(InputField,{fieldName:fieldName,value:(_ref=formData[fieldName])!==null&&_ref!==void 0?_ref:'',fieldProps:{...fieldProps,color:'secondary',fullWidth:true,sx:{gap:0,'.MuiTypography-subtitle1':{fontFamily:'Poppins',fontSize:\"14px\"}},error:Boolean(formError[fieldName]),helperText:formError[fieldName],options:getOptions(fieldName)},fieldType:fieldProps.fieldType,onChange:onChange},fieldName);})})})]}),/*#__PURE__*/_jsx(Stack,{flexBasis:\"45%\",children:/*#__PURE__*/_jsx(Grid,{item:true,xs:4,sx:{textAlign:'-webkit-center'},children:/*#__PURE__*/_jsx(Uploader,{fieldName:\"fieldName\",sx:{placeContent:'flex-end',width:266,height:266},file:formContext.formData.profile_pic?URL.createObjectURL(formContext.formData.profile_pic[0]):''})})})]}),/*#__PURE__*/_jsx(NavigateButtons,{loading:isLoading,onCreateClick:handleCreateClick,onPreviousClick:handlePreviousClick})]});};export default/*#__PURE__*/memo(AssignRoleForm);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
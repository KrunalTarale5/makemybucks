{"ast":null,"code":"import IconFinder from'@components/Icon';import InputField from'@components/InputField';import{useSnackbar}from'@components/Snackbar';import{FiraSansTypography,PoppinsTypography}from'@components/Typography';import{useGetFaqsApi,useUpdateFaqApi,validateFaqFields,validateFaqsForm}from'@hooks/admin-settings';import{LoadingButton}from'@mui/lab';import{Divider,Stack,useTheme}from'@mui/material';import{memo,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const intialFormData={question:'',answer:''};const intialFormError={question:'',answer:''};const Faq=()=>{var _FaqApi$data4;const FaqApi=useGetFaqsApi();const updateApi=useUpdateFaqApi();const{showSnackbar,hideSnackbar}=useSnackbar();const theme=useTheme();const[formData,setFormData]=useState(intialFormData);const[formError,setFormError]=useState(intialFormError);const[selected,setSelected]=useState('');const onChange=(fieldName,value)=>{const _formData={...formData,[fieldName]:value};setFormData(_formData);setFormError({...formError,[fieldName]:validateFaqFields(fieldName,_formData)});};const handleClick=i=>()=>{setFormData({question:i.question,answer:i.answer});setSelected(i.id);};useEffect(()=>{var _FaqApi$data$data$dat,_FaqApi$data,_FaqApi$data$data$dat2,_FaqApi$data2,_FaqApi$data$data$dat3,_FaqApi$data3;setFormData({question:(_FaqApi$data$data$dat=(_FaqApi$data=FaqApi.data)===null||_FaqApi$data===void 0?void 0:_FaqApi$data.data.data[0].question)!==null&&_FaqApi$data$data$dat!==void 0?_FaqApi$data$data$dat:'',answer:(_FaqApi$data$data$dat2=(_FaqApi$data2=FaqApi.data)===null||_FaqApi$data2===void 0?void 0:_FaqApi$data2.data.data[0].answer)!==null&&_FaqApi$data$data$dat2!==void 0?_FaqApi$data$data$dat2:''});setSelected(selected?selected:(_FaqApi$data$data$dat3=(_FaqApi$data3=FaqApi.data)===null||_FaqApi$data3===void 0?void 0:_FaqApi$data3.data.data[0].id)!==null&&_FaqApi$data$data$dat3!==void 0?_FaqApi$data$data$dat3:'');// eslint-disable-next-line react-hooks/exhaustive-deps\n},[FaqApi.dataUpdatedAt]);const onModifyClick=()=>{const validatation=validateFaqsForm(formData);if(validatation.hasError){setFormError(validatation.errors);return;}updateApi.mutateAsync({request:{faq_id:selected,question:formData.question,answer:formData.answer}}).then(response=>{var _response$data,_FaqApi$refetch;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.message,onCancel:()=>hideSnackbar()});// eslint-disable-next-line @typescript-eslint/no-floating-promises\n(_FaqApi$refetch=FaqApi.refetch)===null||_FaqApi$refetch===void 0?void 0:_FaqApi$refetch.call(FaqApi);}).catch(error=>{var _error$response,_error$response$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message,onCancel:()=>hideSnackbar()});});};return/*#__PURE__*/_jsxs(Stack,{gap:4,flexDirection:'row',children:[/*#__PURE__*/_jsx(Stack,{gap:2,flexBasis:'40%',children:(_FaqApi$data4=FaqApi.data)===null||_FaqApi$data4===void 0?void 0:_FaqApi$data4.data.data.map((i,index)=>/*#__PURE__*/_jsxs(Stack,{gap:1,flexDirection:'row',alignItems:'center',children:[/*#__PURE__*/_jsx(IconFinder,{iconName:\"ArrowFill\",iconProps:{fill:selected===i.id?theme.palette.primary.main:'transparent'}}),/*#__PURE__*/_jsxs(FiraSansTypography,{variant:\"subtitle1\",fontWeight:600,paddingRight:1,sx:{color:selected===i.id?theme.palette.primary.main:theme.palette.common.primaryGreyText,cursor:'pointer'},onClick:handleClick(i),children:[index+1,\".\"]}),/*#__PURE__*/_jsx(FiraSansTypography,{variant:\"subtitle1\",fontWeight:600,sx:{color:selected===i.id?theme.palette.primary.main:theme.palette.common.primaryGreyText,cursor:'pointer'},onClick:handleClick(i),children:i.question}),/*#__PURE__*/_jsx(Divider,{sx:{borderColor:'#DFE3ED'}})]},index))}),/*#__PURE__*/_jsx(Divider,{orientation:\"vertical\",flexItem:true,sx:{borderColor:'#DFE3ED'}}),/*#__PURE__*/_jsxs(Stack,{flexBasis:'60%',gap:2,children:[/*#__PURE__*/_jsx(InputField,{showLabel:true,fieldName:'question',value:formData.question,fieldProps:{variant:'outlined',color:'primary',fullWidth:true,sx:{'.MuiInputBase-input':{height:39,fontWeight:600,fontSize:'18px',color:theme.palette.common.primaryGreyText,fontFamily:'Fira Sans'},'.MuiInputBase-root':{borderRadius:'8px',borderColor:theme.palette.common.secondaryGreyText}},error:Boolean(formError['question']),helperText:formError['question']},onChange:onChange},'question'),/*#__PURE__*/_jsx(InputField,{fieldName:\"answer\",value:formData.answer,fieldProps:{multiline:true,maxRows:5,fullWidth:true,size:'medium',sx:{'& .MuiInputBase-input':{height:\"119px !important\",paddingX:\"14px\",paddingY:\"16px\",fontSize:'18px',color:theme.palette.common.primaryGreyText,fontFamily:'Fira Sans',overflow:'auto !important'},'& .MuiInputBase-root':{padding:0,borderRadius:'8px',borderColor:theme.palette.common.secondaryGreyText}},error:Boolean(formError['answer']),helperText:formError['answer']},onChange:onChange}),/*#__PURE__*/_jsx(Stack,{alignItems:'end',children:/*#__PURE__*/_jsx(LoadingButton,{size:\"large\",variant:\"contained\",color:\"primary\",sx:{width:209,height:51,borderRadius:'8px'},loading:updateApi.isLoading,onClick:onModifyClick,children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle1\",sx:{color:theme.palette.common.white},children:\"Modify\"})})})]})]});};export default/*#__PURE__*/memo(Faq);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import IconFinder from'@components/Icon';import InputField from'@components/InputField';import{useSnackbar}from'@components/Snackbar';import Table from'@components/Table';import{PoppinsTypography}from'@components/Typography';import{useGetInvestmentDataApi,useGetTransactionFeesApi,useUpdateTransactionFeesApi}from'@hooks/admin-transation';import{LoadingButton}from'@mui/lab';import{Button,Menu,MenuItem,Stack,useTheme}from'@mui/material';import{memo,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const REPORT_TYPE=['Daily','Monthly'];const InvestmentTab=()=>{var _GetInvestmentDataApi,_GetInvestmentDataApi2,_GetTransactionFeesAp4,_GetTransactionFeesAp5,_GetTransactionFeesAp6,_GetTransactionFeesAp7;const theme=useTheme();const{showSnackbar,hideSnackbar}=useSnackbar();const[fee,setFee]=useState('');const[reportType,setReportType]=useState('Daily');const[reportTypeAnchorEl,setReportTypeAnchorEl]=useState(null);const GetTransactionFeesApi=useGetTransactionFeesApi();const UpdateTransactionFeesApi=useUpdateTransactionFeesApi();const GetInvestmentDataApi=useGetInvestmentDataApi({data_type:reportType.toLowerCase()});const rows=(_GetInvestmentDataApi=(_GetInvestmentDataApi2=GetInvestmentDataApi.data)===null||_GetInvestmentDataApi2===void 0?void 0:_GetInvestmentDataApi2.data.data.transaction_data)!==null&&_GetInvestmentDataApi!==void 0?_GetInvestmentDataApi:[];const columns=[{field:'date',renderHeader:()=>reportType==='Daily'?'Date':\"Month\",renderCell:_ref=>{let{row}=_ref;return row.date;},tableCellProps:{sx:{width:120}},tableHeaderProps:{sx:{width:120}}},{field:'total_transaction',renderHeader:()=>\"Total Transaction (\\u20B9)\",renderCell:_ref2=>{let{row}=_ref2;return row.total_transaction;},tableCellProps:{sx:{width:250,textAlign:'center'}},tableHeaderProps:{sx:{width:250,flexDirection:'column',textAlign:'-webkit-center'}}},{field:'total_gst',renderHeader:()=>'Total GST',renderCell:_ref3=>{let{row}=_ref3;return row.total_gst;},tableCellProps:{sx:{width:200,textAlign:'center'}},tableHeaderProps:{sx:{width:200,flexDirection:'column',textAlign:'-webkit-center'}}},{field:'total_investment',renderHeader:()=>\"Total Investment (\\u20B9)\",renderCell:_ref4=>{let{row}=_ref4;return row.total_investment;},tableCellProps:{sx:{width:200,textAlign:'center'}},tableHeaderProps:{sx:{width:200,flexDirection:'column',textAlign:'-webkit-center'}}},{field:'total_commission',renderHeader:()=>\"Total Comission\",renderCell:_ref5=>{let{row}=_ref5;return row.total_commission;},tableCellProps:{sx:{width:210,textAlign:'center'}},tableHeaderProps:{sx:{width:210,flexDirection:'column',textAlign:'-webkit-center'}}},{field:'gst_commission',renderHeader:()=>\"GST on Commision\",renderCell:_ref6=>{let{row}=_ref6;return row.gst_commission;},tableCellProps:{sx:{width:200,textAlign:'center'}},tableHeaderProps:{sx:{width:200,flexDirection:'column',textAlign:'-webkit-center'}}}];const onSubmit=()=>{UpdateTransactionFeesApi.mutateAsync({request:{transaction_fee:fee}}).then(response=>{var _response$data;showSnackbar({title:'Success!',variant:'sucess',content:(_response$data=response.data)===null||_response$data===void 0?void 0:_response$data.message,onCancel:()=>hideSnackbar()});void GetInvestmentDataApi.refetch();void GetTransactionFeesApi.refetch();}).catch(error=>{var _error$response,_error$response$data;showSnackbar({title:'Error!',variant:'error',content:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message,onCancel:()=>hideSnackbar()});});};useEffect(()=>{var _GetTransactionFeesAp,_GetTransactionFeesAp2,_GetTransactionFeesAp3;setFee((_GetTransactionFeesAp=(_GetTransactionFeesAp2=GetTransactionFeesApi.data)===null||_GetTransactionFeesAp2===void 0?void 0:(_GetTransactionFeesAp3=_GetTransactionFeesAp2.data.response_data)===null||_GetTransactionFeesAp3===void 0?void 0:_GetTransactionFeesAp3.transaction_fees)!==null&&_GetTransactionFeesAp!==void 0?_GetTransactionFeesAp:'');// eslint-disable-next-line react-hooks/exhaustive-deps\n},[GetTransactionFeesApi.dataUpdatedAt]);return/*#__PURE__*/_jsxs(Stack,{gap:2,flexGrow:'inherit',children:[/*#__PURE__*/_jsxs(Stack,{flexDirection:'row',justifyContent:'space-between',alignItems:'flex-end',children:[/*#__PURE__*/_jsxs(Stack,{flexDirection:'row',gap:2,alignItems:'flex-end',children:[/*#__PURE__*/_jsx(InputField,{fieldName:\"input\",fieldProps:{label:'Transaction Fee',fullWidth:true,sx:{width:465,gap:0},disabled:(_GetTransactionFeesAp4=GetTransactionFeesApi.data)===null||_GetTransactionFeesAp4===void 0?void 0:(_GetTransactionFeesAp5=_GetTransactionFeesAp4.data.response_data)===null||_GetTransactionFeesAp5===void 0?void 0:_GetTransactionFeesAp5.clickable},onChange:(f,v)=>setFee(v),value:fee}),/*#__PURE__*/_jsx(LoadingButton,{variant:\"contained\",size:\"large\",sx:{height:40},loading:UpdateTransactionFeesApi.isLoading,disabled:(_GetTransactionFeesAp6=GetTransactionFeesApi.data)===null||_GetTransactionFeesAp6===void 0?void 0:(_GetTransactionFeesAp7=_GetTransactionFeesAp6.data.response_data)===null||_GetTransactionFeesAp7===void 0?void 0:_GetTransactionFeesAp7.clickable,children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"caption\",onClick:onSubmit,children:\"Submit\"})})]}),/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{variant:\"outlined\",size:\"large\",sx:{minWidth:180,borderColor:'#DFE3ED',justifyContent:'space-between'},onClick:e=>setReportTypeAnchorEl(e.currentTarget),endIcon:/*#__PURE__*/_jsx(IconFinder,{iconName:\"ChevronDown\",iconProps:{fill:theme.palette.common.primaryGreyText}}),children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"subtitle2\",sx:{color:theme.palette.common.primaryGreyText},children:reportType})}),/*#__PURE__*/_jsx(Menu,{anchorEl:reportTypeAnchorEl,open:Boolean(reportTypeAnchorEl),onClose:()=>setReportTypeAnchorEl(null),sx:{'.MuiMenu-paper':{left:'auto !important',right:\"\".concat(theme.spacing(3),\" !important\"),width:reportTypeAnchorEl===null||reportTypeAnchorEl===void 0?void 0:reportTypeAnchorEl.offsetWidth}},children:REPORT_TYPE.map(s=>/*#__PURE__*/_jsx(MenuItem,{onClick:()=>{setReportType(s);setReportTypeAnchorEl(null);},children:s},s))})]})]}),/*#__PURE__*/_jsx(Table,{rows:rows,columns:columns,rowId:row=>row.id,tableProps:{size:'small',stickyHeader:false},tableRowProps:{hover:true},loading:GetInvestmentDataApi.isLoading,sx:{paddingTop:5}})]});};export default/*#__PURE__*/memo(InvestmentTab);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import{Paper,TableBody,TableCell,TableContainer,TableHead,TableRow,Table as Table_,Checkbox,useTheme,Box,CircularProgress,IconButton,Stack}from'@mui/material';import React,{useCallback,useState,memo}from'react';import IconFinder from'@components/Icon';import{PoppinsTypography}from'./Typography';import{RESTAURANT_BASE_URL}from'@utils/common';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Table=props=>{const theme=useTheme();const isRestaurantView=location.pathname.includes(\"/\".concat(RESTAURANT_BASE_URL,\"/\"));const[selectedRows,setSelectedRows]=useState([]);const[columnSort,setColumnSort]=useState(null);const onHeadChecboxClick=event=>{var _props$selectedRows2;if(event.target.checked){var _props$selectedRows;setSelectedRows(props.rows.map(row=>String(props.rowId(row))));(_props$selectedRows=props.selectedRows)===null||_props$selectedRows===void 0?void 0:_props$selectedRows.call(props,props.rows);return;}setSelectedRows([]);(_props$selectedRows2=props.selectedRows)===null||_props$selectedRows2===void 0?void 0:_props$selectedRows2.call(props,[]);};const onBodyChecboxClick=rowId=>event=>{var _props$selectedRows3;event.stopPropagation();const selectedIndex=selectedRows.indexOf(String(rowId));let newSelected=[];if(selectedIndex===-1){newSelected=newSelected.concat(selectedRows,String(rowId));}else if(selectedIndex===0){newSelected=newSelected.concat(selectedRows.slice(1));}else if(selectedIndex===selectedRows.length-1){newSelected=newSelected.concat(selectedRows.slice(0,-1));}else if(selectedIndex>0){newSelected=newSelected.concat(selectedRows.slice(0,selectedIndex),selectedRows.slice(selectedIndex+1));}setSelectedRows(newSelected);(_props$selectedRows3=props.selectedRows)===null||_props$selectedRows3===void 0?void 0:_props$selectedRows3.call(props,props.rows.filter(row=>Object.values(row).some(v=>newSelected.find(s=>s===String(v)))));};const isSelected=useCallback(rowId=>selectedRows.indexOf(rowId)!==-1,[selectedRows]);const handleColumnSort=columnSort=>{var _props$onSortChange;setColumnSort(columnSort);(_props$onSortChange=props.onSortChange)===null||_props$onSortChange===void 0?void 0:_props$onSortChange.call(props,columnSort);};return/*#__PURE__*/_jsx(TableContainer,{component:Paper,sx:{flexBasis:\"1px\",flexGrow:1,boxShadow:'none','.MuiTableCell-head':{background:'transparent'},'.MuiTableCell-root':{paddingY:1,border:'none'},'.MuiTableCell-body':{paddingY:1.25},'.MuiTable-root':{borderCollapse:'collapse'},...props.sx},children:/*#__PURE__*/_jsxs(Table_,{stickyHeader:true,...(props===null||props===void 0?void 0:props.tableProps),children:[/*#__PURE__*/_jsx(TableHead,{sx:{background:isRestaurantView?theme.palette.secondary.main:'#E1EDFF',position:'initial',top:0,zIndex:1},children:/*#__PURE__*/_jsxs(TableRow,{children:[props.checkboxSelection&&/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{indeterminate:selectedRows.length>0&&selectedRows.length<props.rows.length,checked:props.rows.length>0&&selectedRows.length===props.rows.length,onChange:onHeadChecboxClick})}),props.columns.map((c,i)=>{var _c$tableHeaderProps;return/*#__PURE__*/_jsx(TableCell,{sx:{'&:hover':{'& #no-column-sort':{visibility:'visible',opacity:0.5,transition:\".3s\"}}},...c.tableHeaderProps,children:/*#__PURE__*/_jsxs(Stack,{flexDirection:'row',alignItems:'center',gap:1,sx:(_c$tableHeaderProps=c.tableHeaderProps)===null||_c$tableHeaderProps===void 0?void 0:_c$tableHeaderProps.sx,children:[/*#__PURE__*/_jsx(PoppinsTypography,{variant:isRestaurantView?'subtitle2':'subtitle1',sx:{color:isRestaurantView?'#727198':'#61656E'},children:c.renderHeader({field:c.field,columnNumber:i})}),c.sortable&&/*#__PURE__*/_jsxs(_Fragment,{children:[c.field!==(columnSort===null||columnSort===void 0?void 0:columnSort.field)&&/*#__PURE__*/_jsx(HeaderIconButton,{id:\"no-column-sort\",title:\"Click to sort\",onClick:()=>handleColumnSort({field:c.field,order:'asc'}),sx:{visibility:'hidden',opacity:0,transition:\".3s\"},children:/*#__PURE__*/_jsx(IconFinder,{iconName:\"ChevronDown\"})}),(columnSort===null||columnSort===void 0?void 0:columnSort.order)==='asc'&&c.field===(columnSort===null||columnSort===void 0?void 0:columnSort.field)&&/*#__PURE__*/_jsx(HeaderIconButton,{title:\"Click to sort descending order\",onClick:()=>handleColumnSort({field:c.field,order:'desc'}),children:/*#__PURE__*/_jsx(IconFinder,{iconName:\"ChevronDown\"})}),(columnSort===null||columnSort===void 0?void 0:columnSort.order)==='desc'&&c.field===(columnSort===null||columnSort===void 0?void 0:columnSort.field)&&/*#__PURE__*/_jsx(HeaderIconButton,{title:\"Click to remove sort\",onClick:()=>handleColumnSort(null),sx:{transform:'rotate(180deg)'},children:/*#__PURE__*/_jsx(IconFinder,{iconName:\"ChevronDown\"})})]})]})},i);})]})}),/*#__PURE__*/_jsx(TableBody,{children:props.loading?props.loadingComponent?props.loadingComponent:/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:props.columns.length,align:\"center\",children:/*#__PURE__*/_jsx(Box,{display:'flex',flex:'auto',alignItems:'center',justifyContent:'center',sx:{position:'absolute',left:\"50%\",top:\"50%\"},children:/*#__PURE__*/_jsx(CircularProgress,{size:60})})})}):props.rows.length===0?/*#__PURE__*/_jsx(TableRow,{children:/*#__PURE__*/_jsx(TableCell,{colSpan:props.columns.length,align:\"center\",children:/*#__PURE__*/_jsx(PoppinsTypography,{variant:\"h6\",fontWeight:600,children:\"Not Found\"})})}):props.rows.map((row,index)=>{const rowId=String(props.rowId(row));const _isSelected=isSelected(rowId);return/*#__PURE__*/_jsxs(TableRow,{sx:{'&:last-child td, &:last-child th':{border:0},backgroundColor:isRestaurantView?'#F8F8F9':\"#F8FBFF\",borderStyle:'solid',borderColor:'white',borderTopWidth:isRestaurantView?4:2,borderBottomWidth:isRestaurantView?4:2,...(isRestaurantView&&{'& th:first-child':{borderRadius:'12px 0 0 12px'},'& th:last-child':{borderRadius:'0 12px 12px 0'}})},selected:props.checkboxSelection&&_isSelected,...(props===null||props===void 0?void 0:props.tableRowProps),children:[props.checkboxSelection&&/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Checkbox,{checked:_isSelected,onChange:onBodyChecboxClick(rowId)})}),props.columns.map((col,i)=>{return/*#__PURE__*/_jsx(TableCell,{component:\"th\",scope:\"row\",...(col===null||col===void 0?void 0:col.tableCellProps),children:/*#__PURE__*/_jsx(PoppinsTypography,{sx:{fontFamily:'Poppins',fontSize:/* isRestaurantView ? `20px` : */\"16px\",color:theme.palette.common.primaryGreyText,whiteSpace:'nowrap',overflow:'hidden',textOverflow:'ellipsis',fontWeight:isRestaurantView?600:500,...(col===null||col===void 0?void 0:col.tableCellTypographySx)},children:col.renderCell({row,rowNumber:index})})},i);})]},index);})})]})});};export default/*#__PURE__*/memo(Table);const HeaderIconButton=/*#__PURE__*/memo(props=>/*#__PURE__*/_jsx(IconButton,{size:\"small\",color:\"inherit\",...props,title:undefined,sx:{padding:\"2px\",...props.sx}}));","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}